<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>My Hakyll Blog - JPA에서 transaction 처리 방법</title>
  <meta name="description" content="This is a really greate blog">

  <link rel="canonical" href="http://ygpark2.github.io">
  <link rel="alternate" type="application/rss+xml" title="Young Gyu Blog" href="rss.xml" />

  <!-- Material Design Lite css Library -->
  <link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/code.getmdl.io/1.2.1/material.min.css">
  
  <!-- Material Design Fonts -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css">

  <!-- Custom theme css -->
  <link rel="stylesheet" href="../../../../assets/css/style.css">

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>

  <!-- Material Design Lite js Library -->
  <script type="text/javascript" src="https://storage.googleapis.com/code.getmdl.io/1.2.1/material.min.js"></script>

  <!--
  
  <script rel="javascript" type="text/javascript" src="/assets/js/site.js"></script>
  

  <script rel="javascript" type="text/javascript" src="/assets/js/search.js"></script>
  <script rel="javascript" type="text/javascript">
    superSearch({
      searchFile: '/feed.xml',
      searchSelector: '#js-search', // CSS Selector for search container element.
      inputSelector: '#js-search__input', // CSS selector for <input>
      resultsSelector: '#js-search__results' // CSS selector for results container
    });
  </script>
  -->

  <script>hljs.initHighlightingOnLoad();</script>
</head>

  <body>

    <div class="mdl-layout mdl-js-layout">

      <!-- Start Layout -->
      
          <!-- search layout -->

<!--
<div class="super-search" id="js-search">
  <ul class="super-search__results" id="js-search__results"></ul>        
  <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored super-search__close-btn" onclick="superSearch.toggle()">
    <i class="material-icons">close</i>
  </button>
</div>
-->

<!-- /end search -->

          
<header class="mdl-layout__header mdl-layout__header--waterfall">
  <!-- Top row, always visible -->
  <div class="first-head-row mdl-layout__header-row">
    <!-- Title -->
    <span class="mdl-layout-title">Young Gyu Blog</span>
    <div class="mdl-layout-spacer"></div>
    <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right">

      <label class="mdl-button mdl-js-button mdl-button--icon" for="waterfall-exp">
        <i class="material-icons">search</i>
      </label>

      <div class="mdl-textfield__expandable-holder">
        <input class="mdl-textfield__input" type="text" name="sample" id="waterfall-exp">
      </div>

<!--
      <label class="mdl-button mdl-js-button mdl-button--icon" for="js-search__input" data-upgraded=",MaterialButton">
        <i class="material-icons">search</i>
      </label>

      <div class="mdl-textfield__expandable-holder">
        <input class="mdl-textfield__input super-search__input" type="text" id="js-search__input" />
      </div>

      <button class="mdl-button mdl-js-button mdl-button--icon" id="fixed-menu-lower-left">
        <i class="material-icons">more_vert</i>
      </button>

      <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="fixed-menu-lower-left">
        <li><a href="archive.html" class="mdl-menu__item">archive</a></li>
        <li><a href="about.html" class="mdl-menu__item">about</a></li>
        <li><a href="contact.html" class="mdl-menu__item">contact</a></li>
        <li><a href="tagCloud.html" class="mdl-menu__item">tagCloud</a></li>
      </ul>
-->

    </div>
  </div>
  <!-- Bottom row, not visible on scroll -->
  <div class="second-head-row mdl-layout__header-row">
    <div class="mdl-layout-spacer"></div>
    <!-- Navigation -->
    <nav class="waterfall-header-nav mdl-navigation">
      <a class="mdl-navigation__link" href="../../../../">Home</a>
      <a class="mdl-navigation__link" href="../../../../archive.html">Archive</a>
      <a class="mdl-navigation__link" href="../../../../tagCloud.html">Tags</a>
      <a class="mdl-navigation__link" href="../../../../about.html">About</a>
      <a class="mdl-navigation__link" href="../../../../contact.html">Contact</a>
    </nav>
  </div>
</header>

<div class="left-drawer mdl-layout__drawer">
  <span class="mdl-layout-title">메뉴</span>
  <nav class="mdl-navigation">
    <a class="mdl-navigation__link" href="../../../../">Home</a>
    <a class="mdl-navigation__link" href="../../../../archive.html">Archive</a>
    <a class="mdl-navigation__link" href="../../../../tagCloud.html">Tags</a>
    <a class="mdl-navigation__link" href="../../../../about.html">About</a>
    <a class="mdl-navigation__link" href="../../../../contact.html">Contact</a>
  </nav>
</div>

      

      <main class="mdl-layout__content">
        <div class="page-content mdl-grid">
          <!-- Your content goes here -->
          
<div class="mdl-grid" style="width: 100%;">
    <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">
        
        <div class="post-view-title mdl-card__media">
            <h3>JPA에서 transaction 처리 방법</h3>
        </div>
          
        <div class="post-view-header meta">
            <div class="minilogo" style="background-image: url('/images/avatar-64x64.png');"></div>
            <div class="info">
                <a href="../../../../about.html">
                    <strong>
                         Young Gyu 
                    </strong>
                </a>
                <span>2015-11-13</span>
            </div>
            
            <div class="section-spacer"></div>
            
        </div>
            
        <div class="post-view-content">
            <div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1"></a>@ <span class="fu">Transactional</span>(rollbackFor = {<span class="bu">RuntimeException</span>.<span class="fu">class</span>})</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">public</span> SomeService {</span>
<span id="cb1-3"><a href="#cb1-3"></a>  @ Autowired SomeRepository repository1;</span>
<span id="cb1-4"><a href="#cb1-4"></a>  @ Autowired AnotherRepository repository2;</span>
<span id="cb1-5"><a href="#cb1-5"></a>  @ Autowired ThirdRepository repository3;</span>
<span id="cb1-6"><a href="#cb1-6"></a>  ...</span>
<span id="cb1-7"><a href="#cb1-7"></a>  @ <span class="fu">Transactional</span>(rollbackFor = {<span class="bu">RuntimeException</span>.<span class="fu">class</span>})</span>
<span id="cb1-8"><a href="#cb1-8"></a>  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">SomeMethod</span>(SomeEntity obj, <span class="bu">String</span> someNewValue) {</span>
<span id="cb1-9"><a href="#cb1-9"></a>    <span class="kw">try</span> {</span>
<span id="cb1-10"><a href="#cb1-10"></a>      repository1.<span class="fu">updateMethod</span>();</span>
<span id="cb1-11"><a href="#cb1-11"></a>      repository2.<span class="fu">updateMethod</span>();</span>
<span id="cb1-12"><a href="#cb1-12"></a>      obj.<span class="fu">setValue</span>(someNewValue);</span>
<span id="cb1-13"><a href="#cb1-13"></a>      repository3.<span class="fu">save</span>(obj);</span>
<span id="cb1-14"><a href="#cb1-14"></a>    } <span class="kw">catch</span> (<span class="bu">Exception</span> ex) {</span>
<span id="cb1-15"><a href="#cb1-15"></a>      <span class="kw">throw</span> <span class="kw">new</span> <span class="bu">RuntimeException</span>();</span>
<span id="cb1-16"><a href="#cb1-16"></a>    }</span>
<span id="cb1-17"><a href="#cb1-17"></a>  }</span>
<span id="cb1-18"><a href="#cb1-18"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">class</span> MyService2 {</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="at">@Transactional</span>(noRollbackFor = <span class="bu">IllegalArgumentException</span>.<span class="fu">class</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">validateAddress</span>(Address address) {</span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="co">// Some validations using dao</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="kw">if</span> (!isValid) {</span>
<span id="cb2-6"><a href="#cb2-6"></a>      <span class="kw">throws</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span>();</span>
<span id="cb2-7"><a href="#cb2-7"></a>    }</span>
<span id="cb2-8"><a href="#cb2-8"></a>  }</span>
<span id="cb2-9"><a href="#cb2-9"></a>}</span></code></pre></div>
        </div>
        
        <div class="post-view-footer"> 
             <p class="tags">Tags: <a href="../../../../tags/jpa.html">jpa</a>, <a href="../../../../tags/transaction.html">transaction</a></p> 
             <p class="categories">Category: <a href="../../../../categories/13.html">13</a></p> 
        </div>  
    </div>

    <nav class="hugo-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    
        <a href="../../../../post/shellprocesses/" class="hugo-nav__button">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation" data-upgraded=",MaterialButton,MaterialRipple">
            <i class="icon ion-android-arrow-back"></i>
            <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>
            Older
        </a>
        <div class="section-spacer"></div>
    
    </nav>

</div>
        </div>
        
        <footer class="page-footer mdl-mini-footer">
  <div class="mdl-mini-footer__left-section">
    <div class="mdl-logo">Title</div>
    <ul class="mdl-mini-footer__link-list">
      <li><a href="#">Help</a></li>
      <li><a href="#">Privacy & Terms</a></li>
    </ul>
  </div>
</footer>
      </main>
      <div class="mdl-layout__obfuscator"></div>
      <!-- /End Layout -->

    </div>
  </body>

</html>